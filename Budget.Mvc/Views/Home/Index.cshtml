@model Budget.Mvc.Models.ViewModels.TransactionViewModel

<button id="addTransactionBtn">Add Transaction</button>
<button id="addCategoryBtn">Add Category</button>

<button id="addCategoryMvcBtn">Add Category MVC</button>

@*<div id="addCategoryModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <partial name="_addTransaction" />
        </div>
    </div>*@


<div id="addCategoryMvcModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <partial name="InsertCategory" />
    </div>
</div>


<div id="addTransactionModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <partial name="InsertTransaction" />
    </div>
</div>

<table id="records" class="table">
    <thead>
        <tr>
            <th>
                Date
            </th>
            <th>
                Amount
            </th>
            <th>
                Name
            </th>
            <th>
                Category
            </th>
            <th>
                Type
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var transaction in Model.Transactions)
        {
            <tr class="list-row">
                <td>
                    @Html.DisplayFor(modelItem => transaction.Date)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => transaction.Amount)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => transaction.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => transaction.Category)
                </td>
                <td>
                    @transaction.TransactionType.ToDescription()
                </td>
                <td>
                    <a button type="button" class="btn btn-danger" asp-area="Budget" asp-route-id="@transaction.Id">
                        Delete
                    </a>

                    <a button type="button" class="btn btn-primary" asp-area="Budget" asp-route-id="@transaction.Id">
                        Edit
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

@section scripts{
    <script>
        $("#addCategoryBtn").on("click", function () {
            console.log('clicked1');
            $("#addCategoryModal").modal("show");
        });

        $("#addCategoryMvcBtn").on("click", function () {
            console.log('clicked8');
            $("#addCategoryMvcModal").modal("show");
        });

        $("#addTransactionBtn").on("click", function () {
            $.ajax({
                url: "@Url.Action("PrepareTransactionForm", "Home")",
                success: function (data) {
                    $("#addTransactionModal .modal-dialog").html(data);
                    $("#addTransactionModal").modal("show");

                    $("form").removeData("validator");
                    $("form").removeData("unobtrusiveValidation");
                    $.validator.unobtrusive.parse("form");
                }
            });
        });

        @*$("#addTransactionBtn").on("click", function () {

                    $("#addTransactionModal").modal("show");

            });*@



    </script>
}